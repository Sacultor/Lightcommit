# ===================================
# LightCommit 环境变量配置模板
# ===================================
# 使用说明：
# 1. 复制此文件为 .env（注意：是 .env 而不是 .env.local）
#    cp env.example .env
# 2. 填写所有必需的配置项
# 3. .env 文件已在 .gitignore 中，不会被提交到 Git
# 
# 变量命名规范：
# - NEXT_PUBLIC_* : 前端可访问（会打包到浏览器）
# - 无前缀 : 仅后端可访问（如私钥、密码）
# ===================================

# ===================================
# 应用基础配置
# ===================================
PORT=3000
NODE_ENV=development

# ===================================
# JWT Session 配置
# ===================================
# JWT 签名密钥（必须配置，至少 32 字符）
# 生产环境必须使用强随机密钥！
JWT_SECRET=AGYlEVjjDlHpT7GsAW2au04DAqVgB4NRMPT+jWyq/q2fJTRzhhFz36XAVcXsPRI5
JWT_EXPIRATION=7d

# ===================================
# GitHub OAuth 配置
# ===================================
# 获取方式：https://github.com/settings/developers
# 1. 创建 OAuth App
# 2. 获取 Client ID 和 Client Secret
# 3. 设置 Authorization callback URL

# OAuth Client ID
GITHUB_CLIENT_ID=your_github_client_id

# OAuth Client Secret（敏感）
GITHUB_CLIENT_SECRET=your_github_client_secret

# OAuth 回调 URL
GITHUB_CALLBACK_URL=http://localhost:3000/auth/callback

# Webhook 签名密钥（用于验证 Webhook 请求，敏感）
GITHUB_WEBHOOK_SECRET=your_webhook_secret

# GitHub Personal Access Token（可选，用于提高 API 限流）
GITHUB_TOKEN=ghp_your_personal_access_token

# ===================================
# Supabase 配置（数据库 + 认证）
# ===================================
# 获取方式：https://supabase.com
# 1. 创建项目
# 2. 在 Settings > API 中获取密钥

# Supabase 项目 URL（前端可访问）
NEXT_PUBLIC_SUPABASE_URL=https://your-project.supabase.co

# Supabase 匿名密钥（前端可访问，有 RLS 保护）
NEXT_PUBLIC_SUPABASE_ANON_KEY=your_anon_key

# Supabase URL（后端）
SUPABASE_URL=https://your-project.supabase.co

# Supabase 匿名密钥（后端）
SUPABASE_ANON_KEY=your_anon_key

# Supabase Service Role 密钥（敏感，后端专用，绕过 RLS）
SUPABASE_SERVICE_ROLE_KEY=your_service_role_key

# ===================================
# 区块链配置（前端）
# ===================================
# 链 ID：
# - 1: 以太坊主网
# - 11155111: Sepolia 测试网
# - 31337: Hardhat 本地网络

# 链 ID
NEXT_PUBLIC_CHAIN_ID=31337

# RPC URL（前端）
NEXT_PUBLIC_RPC_URL=http://localhost:8545

# 区块浏览器 URL（可选）
NEXT_PUBLIC_EXPLORER_URL=https://sepolia.etherscan.io

# API URL（可选）
NEXT_PUBLIC_API_URL=http://localhost:3000/api

# 前端 URL
NEXT_PUBLIC_FRONTEND_URL=http://localhost:3000

# ERC8004 合约地址（前端可访问）
NEXT_PUBLIC_IDENTITY_REGISTRY_ADDRESS=0x...
NEXT_PUBLIC_REPUTATION_REGISTRY_ADDRESS=0x...
NEXT_PUBLIC_VALIDATION_REGISTRY_ADDRESS=0x...
NEXT_PUBLIC_COMMIT_NFT_ADDRESS=0x...

# ===================================
# 区块链配置（后端）
# ===================================
# 注意：私钥绝不能用 NEXT_PUBLIC_ 前缀！

# Sepolia 测试网 RPC URL（后端专用）
# 可以使用 Infura、Alchemy 等服务
SEPOLIA_RPC_URL=https://sepolia.infura.io/v3/your_infura_project_id

# 部署账户私钥（敏感，后端专用）
# 格式：0x... 开头的 64 位十六进制字符串
SEPOLIA_PRIVATE_KEY=0xYourPrivateKeyHere

# CommitNFT 合约地址（通用）
CONTRACT_ADDRESS=0xYourContractAddressHere

# ===================================
# 数据库配置（可选，如果不使用 Supabase）
# ===================================
# 连接 URL（优先使用）
DATABASE_URL=postgresql://user:password@localhost:5432/lightcommit

# 或者使用独立参数
DATABASE_HOST=localhost
DATABASE_PORT=5432
DATABASE_USER=postgres
DATABASE_PASSWORD=your_password
DATABASE_NAME=lightcommit

# ===================================
# IPFS 配置（可选，用于 NFT 元数据存储）
# ===================================
# 三种方案任选其一：

# 方案 1：Web3.Storage（推荐，完全免费）
# 注册：https://web3.storage
# 特点：无限存储，无限请求，Protocol Labs 官方支持
WEB3_STORAGE_TOKEN=

# 方案 2：Pinata（有免费套餐）
# 注册：https://pinata.cloud
# 免费套餐：1GB 存储，100 requests/月
PINATA_API_KEY=9c0af54151bdc2f79bcd
PINATA_SECRET_API_KEY=6e2e533f1cbe30f1745a875486048c90ab1e380121592ec7dedbf83ff9b94ab9

# 方案 3：不配置（开发测试）
# 如果不配置任何 IPFS 服务，系统会自动使用 mock 哈希
# ⚠️ Mock 哈希仅用于开发测试，生产环境建议配置真实的 IPFS 服务

# 详细配置说明：docs/IPFS配置指南.md
